<div style="width: 600px; overflow-x: auto;">

|F:/share/github/test/main.cpp||
|:-------|:------|
|#include&nbsp;\<iostream\><br>#include&nbsp;\<fstream\><br>#include&nbsp;\<string\><br>#include&nbsp;\<vector\><br>#include&nbsp;\<QtSql/QSqlDatabase\><br>#include&nbsp;\<QtSql\><br>#include&nbsp;\<QDateTime\><br>#include&nbsp;\<fstream\><br>#include&nbsp;\<regex\><br><br>using&nbsp;namespace&nbsp;std;<br><br>std::string&nbsp;code_block_char;<br>std::vector\<std::string\>code_blocks;<br><br>bool&nbsp;compareStringEnd(std::string&nbsp;filePath,&nbsp;std::string&nbsp;end){<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(filePath.size()&nbsp;\<&nbsp;end.length()&nbsp;\|\|&nbsp;filePath.substr(filePath.size()&nbsp;-&nbsp;end.length())&nbsp;!=&nbsp;end)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//std::cerr&nbsp;\<\<&nbsp;"Error:&nbsp;File&nbsp;is&nbsp;not&nbsp;a&nbsp;"&nbsp;\<\<&nbsp;end&nbsp;\<\<&nbsp;"&nbsp;header&nbsp;file."&nbsp;\<\<&nbsp;end.length()&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}|#include&nbsp;\<iostream\><br>#include&nbsp;\<fstream\><br>#include&nbsp;\<string\><br>#include&nbsp;\<vector\><br>#include&nbsp;\<QtSql/QSqlDatabase\><br>#include&nbsp;\<QtSql\><br>#include&nbsp;\<QDateTime\><br>#include&nbsp;\<fstream\><br>#include&nbsp;\<regex\><br><br>using&nbsp;namespace&nbsp;std;<br><br>std::string&nbsp;code_block_char;<br>std::vector\<std::string\>code_blocks;<br><br>bool&nbsp;compareStringEnd(std::string&nbsp;filePath,&nbsp;std::string&nbsp;end){<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(filePath.size()&nbsp;\<&nbsp;end.length()&nbsp;\|\|&nbsp;filePath.substr(filePath.size()&nbsp;-&nbsp;end.length())&nbsp;!=&nbsp;end)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//std::cerr&nbsp;\<\<&nbsp;"Error:&nbsp;File&nbsp;is&nbsp;not&nbsp;a&nbsp;"&nbsp;\<\<&nbsp;end&nbsp;\<\<&nbsp;"&nbsp;header&nbsp;file."&nbsp;\<\<&nbsp;end.length()&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}|
|int&nbsp;check_code_blocks(const&nbsp;std::string&&nbsp;filename)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;std::ifstream&nbsp;file(filename);<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!file.is_open())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&nbsp;\<\<&nbsp;"Error:&nbsp;Could&nbsp;not&nbsp;open&nbsp;file&nbsp;"&nbsp;\<\<&nbsp;filename&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;num_block&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;brace_level&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;ch;<br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;ch_num&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;std::string&nbsp;str_tmp;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if(compareStringEnd(filename,&nbsp;".h")){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(file.get(ch)){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str_tmp&nbsp;+=&nbsp;ch;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_blocks.push_back(str_tmp);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if(compareStringEnd(filename,&nbsp;".c")&nbsp;\|\|&nbsp;compareStringEnd(filename,&nbsp;".cpp")){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(file.get(ch))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch_num&nbsp;+=&nbsp;1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_block_char.push_back(ch);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'{')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(brace_level&nbsp;==&nbsp;0)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_block++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brace_level++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'}')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brace_level--;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(brace_level&nbsp;\<&nbsp;0)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&nbsp;\<\<&nbsp;"Warning:&nbsp;Unmatched&nbsp;closing&nbsp;brace&nbsp;detected"&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brace_level&nbsp;=&nbsp;0;&nbsp;&nbsp;//&nbsp;Reset&nbsp;to&nbsp;avoid&nbsp;negative&nbsp;counts<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(brace_level&nbsp;==&nbsp;0){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//std::cout&nbsp;\<\<&nbsp;code_block_char&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_block_char&nbsp;=&nbsp;std::regex_replace(code_block_char,&nbsp;std::regex(R"(^((\\r?\\n)+))"),&nbsp;"");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_blocks.push_back(code_block_char);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_block_char.clear();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("file&nbsp;has&nbsp;%d&nbsp;chars\\n",&nbsp;ch_num);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(brace_level&nbsp;!=&nbsp;0)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&nbsp;\<\<&nbsp;"Warning:&nbsp;Unmatched&nbsp;opening&nbsp;braces&nbsp;detected"&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;num_block;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br>}||
|bool&nbsp;createDB(const&nbsp;char*&nbsp;file)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;db_name[128]&nbsp;=&nbsp;{0};<br>&nbsp;&nbsp;&nbsp;&nbsp;sprintf(db_name,&nbsp;"%s.db",&nbsp;file);<br>&nbsp;&nbsp;&nbsp;&nbsp;QSqlDatabase&nbsp;database_;<br>&nbsp;&nbsp;&nbsp;&nbsp;database_&nbsp;=&nbsp;QSqlDatabase::addDatabase("QSQLITE");<br>&nbsp;&nbsp;&nbsp;&nbsp;database_.setDatabaseName(db_name);<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!database_.open())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;\<\<&nbsp;QDateTime::currentDateTime().toString("yyyy-MM-dd&nbsp;HH:mm:ss").toStdString()&nbsp;\<\<&nbsp;"&nbsp;DATABASE:&nbsp;ERROR:&nbsp;CAN&nbsp;NOT&nbsp;OPEN"&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;QSqlQuery&nbsp;deleteQuery;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;清空表数据（保留表结构）<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!deleteQuery.exec("DROP&nbsp;TABLE&nbsp;IF&nbsp;EXISTS&nbsp;code_block"))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qDebug()&nbsp;\<\<&nbsp;"Failed&nbsp;to&nbsp;clear&nbsp;table:"&nbsp;\<\<&nbsp;deleteQuery.lastError().text();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;2.&nbsp;创建表（如果不存在）<br>&nbsp;&nbsp;&nbsp;&nbsp;QSqlQuery&nbsp;createQuery;<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!createQuery.exec(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CREATE&nbsp;TABLE&nbsp;IF&nbsp;NOT&nbsp;EXISTS&nbsp;code_block&nbsp;("<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"id&nbsp;INTEGER&nbsp;PRIMARY&nbsp;KEY&nbsp;AUTOINCREMENT,&nbsp;"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"code&nbsp;TEXT&nbsp;NOT&nbsp;NULL,&nbsp;"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"comment&nbsp;TEXT)"<br>&nbsp;&nbsp;&nbsp;&nbsp;))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qDebug()&nbsp;\<\<&nbsp;"Error:&nbsp;Failed&nbsp;to&nbsp;create&nbsp;table:"&nbsp;\<\<&nbsp;createQuery.lastError().text();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;database_.close();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3.&nbsp;执行批量插入<br>&nbsp;&nbsp;&nbsp;&nbsp;QSqlQuery&nbsp;insertQuery;<br>&nbsp;&nbsp;&nbsp;&nbsp;insertQuery.prepare("INSERT&nbsp;INTO&nbsp;code_block&nbsp;(code,&nbsp;comment)&nbsp;VALUES&nbsp;(?,&nbsp;?)");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;QVariantList&nbsp;codes,&nbsp;comments;<br>&nbsp;&nbsp;&nbsp;&nbsp;for(auto&nbsp;block&nbsp;:&nbsp;code_blocks){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;codes&nbsp;\<\<&nbsp;block.c_str();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comments&nbsp;\<\<&nbsp;"";<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;insertQuery.addBindValue(codes);<br>&nbsp;&nbsp;&nbsp;&nbsp;insertQuery.addBindValue(comments);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!insertQuery.execBatch())&nbsp;{&nbsp;&nbsp;//&nbsp;关键：execBatch()&nbsp;批量执行<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qDebug()&nbsp;\<\<&nbsp;"Batch&nbsp;insert&nbsp;error:"&nbsp;\<\<&nbsp;insertQuery.lastError().text();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;database_.rollback();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;database_.commit();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;qDebug()&nbsp;\<\<&nbsp;"Record&nbsp;inserted&nbsp;successfully!";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;4.&nbsp;关闭数据库（可选，QSqlDatabase&nbsp;析构时会自动关闭）<br>&nbsp;&nbsp;&nbsp;&nbsp;database_.close();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>}||
|std::string&nbsp;process_special_character(const&nbsp;std::string&&nbsp;input)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;std::string&nbsp;output;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(size_t&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;\<&nbsp;input.size();&nbsp;++i)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;ch&nbsp;=&nbsp;input[i];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;处理换行（支持&nbsp;\\r\\n&nbsp;和&nbsp;\\n）<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'\\r'&nbsp;&&&nbsp;i&nbsp;+&nbsp;1&nbsp;\<&nbsp;input.size()&nbsp;&&&nbsp;input[i&nbsp;+&nbsp;1]&nbsp;==&nbsp;'\\n')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;+=&nbsp;"&#10;";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++i;&nbsp;//&nbsp;跳过&nbsp;\\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'\\n')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;+=&nbsp;"&#10;";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'\<')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;+=&nbsp;"\\\\\<";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'\>')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;+=&nbsp;"\\\\\>";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(ch&nbsp;==&nbsp;'\|')&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;+=&nbsp;"\\\\\|";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;+=&nbsp;ch;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;output;<br>}||
|std::string&nbsp;getFileNameFromPath(const&nbsp;std::string&&nbsp;filePath)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;查找最后一个&nbsp;'/'&nbsp;或&nbsp;'\\'<br>&nbsp;&nbsp;&nbsp;&nbsp;size_t&nbsp;lastSlashPos&nbsp;=&nbsp;filePath.find_last_of("/\\\\");<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lastSlashPos&nbsp;!=&nbsp;std::string::npos)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;filePath.substr(lastSlashPos&nbsp;+&nbsp;1);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;filePath;&nbsp;//&nbsp;无分隔符，直接返回原字符串<br>}||
|bool&nbsp;createMD(const&nbsp;char*&nbsp;file)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;md_name[128]&nbsp;=&nbsp;{0};<br>&nbsp;&nbsp;&nbsp;&nbsp;sprintf(md_name,&nbsp;"%s.md",&nbsp;file);<br>&nbsp;&nbsp;&nbsp;&nbsp;std::string&nbsp;file_name&nbsp;=&nbsp;getFileNameFromPath(file);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.&nbsp;检查文件是否存在，存在则删除<br>&nbsp;&nbsp;&nbsp;&nbsp;std::ifstream&nbsp;checkFile(md_name);<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(checkFile.good())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkFile.close();&nbsp;//&nbsp;先关闭文件流<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(std::remove(md_name)&nbsp;!=&nbsp;0)&nbsp;{&nbsp;//&nbsp;删除文件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&nbsp;\<\<&nbsp;"Error:&nbsp;Failed&nbsp;to&nbsp;delete&nbsp;existing&nbsp;file."&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;2.&nbsp;创建新文件并写入内容<br>&nbsp;&nbsp;&nbsp;&nbsp;std::ofstream&nbsp;outFile(md_name,&nbsp;std::ios::out);&nbsp;//&nbsp;打开文件（默认覆盖模式）<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!outFile.is_open())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&nbsp;\<\<&nbsp;"Error:&nbsp;Failed&nbsp;to&nbsp;create&nbsp;file."&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3.&nbsp;写入字符串&nbsp;+&nbsp;换行符<br>&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\<div&nbsp;style=\\"width:&nbsp;1200px;&nbsp;overflow-x:&nbsp;auto;\\"\>";<br>&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\|"&nbsp;\<\<&nbsp;file_name.c_str()&nbsp;\<\<&nbsp;"\|"&nbsp;\<\<&nbsp;"\|"&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\|:-------\|:------\|"&nbsp;\<\<&nbsp;std::endl;&nbsp;//&nbsp;std::endl&nbsp;会自动添加换行符并刷新缓冲区<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for(auto&nbsp;block&nbsp;:&nbsp;code_blocks)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\|\<pre\>";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;process_special_character(block).c_str();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\</pre\>\|\<pre\>";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\</pre\>\|";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;outFile&nbsp;\<\<&nbsp;"\</div\>";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;4.&nbsp;关闭文件<br>&nbsp;&nbsp;&nbsp;&nbsp;outFile.close();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;\<\<&nbsp;"create&nbsp;md&nbsp;file&nbsp;success"&nbsp;\<\<&nbsp;std::endl;<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>}||
|int&nbsp;main(int&nbsp;argc,&nbsp;char*&nbsp;argv[])<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;printf("argc&nbsp;%d\\n",&nbsp;argc);<br>&nbsp;&nbsp;&nbsp;&nbsp;for(int&nbsp;i=0;&nbsp;i\<argc;&nbsp;i++)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("%s\\n",&nbsp;argv[i]);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if(argc&nbsp;!=&nbsp;2)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("argc&nbsp;error,&nbsp;should&nbsp;be&nbsp;2\\n");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;ret&nbsp;=&nbsp;check_code_blocks(argv[1]);<br>&nbsp;&nbsp;&nbsp;&nbsp;printf("file&nbsp;%s&nbsp;has&nbsp;%d&nbsp;code&nbsp;blocks\\n",&nbsp;argv[1],&nbsp;ret);<br>&nbsp;&nbsp;&nbsp;&nbsp;createDB(argv[1]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;createMD(argv[1]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br>}||

</div>