
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>code notes</title>
    <!-- 引入marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        .page-container { display: flex; width: 100vw; height: 100vh; overflow: hidden; }
        .code-column { width: 45%; height: 100%; background: #1e1e1e; color: #dcdcdc; overflow-y: auto; padding: 20px; border-right: 1px solid #333; }
        .explain-column { width: 55%; height: 100%; background: #f8f9fa; overflow-y: auto; padding: 20px; }
        .code-block, .explain-block { margin-bottom: 30px; padding: 15px; border-radius: 8px; }
        .code-block { background: #2d2d2d; position: relative; }
        .explain-block { background: white; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .code-block h3 { color: #61afef; margin-bottom: 10px; font-size: 16px; }
        .explain-block h3 { color: #2d3748; margin-bottom: 10px; font-size: 16px; }
        .code-content { font-family: 'Consolas', monospace; font-size: 14px; line-height: 1.6; white-space: pre-wrap; }
        .explain-content { color: #4a5568; font-size: 14px; line-height: 1.8; }
        .save-btn { background: transparent; border: none; color: transparent;}
        .code-block.active { border: 2px solid #61afef; }
        .explain-block.active { border-left: 4px solid #61afef; background: #f0f8ff; }
        .header { padding: 10px 20px; background: #333; color: 333; text-align: center; }
        @media (max-width: 768px) { .page-container { flex-direction: column; } .code-column, .explain-column { width: 100%; height: 50%; } }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            border: 1px solid #ddd;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: #3498db;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        tr:hover {
            background-color: #f1f8ff;
        }

        ul, ol {
            padding-left: 2em;
            margin: 1em 0;
        }

        li {
            margin: 0.5em 0;
        }

        hr {
            margin: 1.5em 0;
            border: none;
            border-top: 1px solid #ddd;
        }

        .explain-content pre {
            background-color: #1e1e1e;
            border-radius: 6px;
            padding: 1em;
            margin: 1em 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .explain-content code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.5;
            color: #dcdcdc;
            white-space: inherit;
        }

        .code-content pre,
        .code-content code {
            background-color: transparent;
            border: none;
            padding: 0;
            color: inherit;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .explain-content p code,
        .explain-content li code {
            background-color: #e0e0e0;
            color: #ff5956 !important;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="page-container">
<div class="code-column" id="codeColumn">
        <div class="code-block" data-id="block0" id="block0">
            <div class="code-content"></div>
        </div>

        <div class="code-block" data-id="block1" id="block1">
            <div class="code-content"></div>
        </div>
</div>
<div class="explain-column" id="explainColumn">
        <div class="explain-block" data-id="block0" id="explainBlock0">
            <div class="explain-content"></div>
        </div>

        <div class="explain-block" data-id="block1" id="explainBlock1">
            <div class="explain-content"></div>
        </div>
    </div>
</div>
    <script>
        const blockCodeContents = {
            block0 : `\`\`\`python
# vim: expandtab:ts=4:sw=4
import numpy as np


\`\`\`
`,
block1 : `\`\`\`python
class Detection(object):
    """
    This class represents a bounding box detection in a single image.

    Parameters
    ----------
    tlwh : array_like
        Bounding box in format \`(top left x, top left y, width, height)\`.
    confidence : float
        Detector confidence score.
    feature : array_like
        A feature vector that describes the object contained in this image.

    Attributes
    ----------
    tlwh : ndarray
        Bounding box in format \`(top left x, top left y, width, height)\`.
    confidence : ndarray
        Detector confidence score.
    feature : ndarray | NoneType
        A feature vector that describes the object contained in this image.

    """

    def __init__(self, tlwh, confidence, feature):
        self.tlwh = np.asarray(tlwh, dtype=np.float)
        self.confidence = float(confidence)
        self.feature = np.asarray(feature, dtype=np.float32)

    def to_tlbr(self):
        """Convert bounding box to format \`(min x, min y, max x, max y)\`, i.e.,
        \`(top left, bottom right)\`.
        """
        ret = self.tlwh.copy()
        ret[2:] += ret[:2]
        return ret

    def to_xyah(self):
        """Convert bounding box to format \`(center x, center y, aspect ratio,
        height)\`, where the aspect ratio is \`width / height\`.
        """
        ret = self.tlwh.copy()
        ret[:2] += ret[2:] / 2
        ret[2] /= ret[3]
        return ret

\`\`\`
`
        };

        const blockExplainContents = {
            block0 : ``,
block1 : ``
        };

        // 获取blockCodeContents的item大小
        const blockCodeContentsSize = Object.keys(blockCodeContents).length;
        console.log('blockCodeContents的item大小:', blockCodeContentsSize);


        // 页面加载完成后，使用marked.parse将代码和解释写入到对应的div中
        window.addEventListener('DOMContentLoaded', function() {
            // 使用循环写入所有代码块和解释块内容，循环上限使用blockCodeContents的实际大小
            for (let i = 0; i < blockCodeContentsSize; i++) {
                const blockId = `block${i}`;
                const explainBlockId = `explainBlock${i}`;

                // 写入代码块内容
                document.getElementById(blockId).querySelector('.code-content').innerHTML = marked.parse(blockCodeContents[blockId]);

                // 写入解释块内容
                document.getElementById(explainBlockId).querySelector('.explain-content').innerHTML = marked.parse(blockExplainContents[blockId]);
            }
        });

        const codeColumn = document.getElementById('codeColumn');
    codeColumn.addEventListener('scroll', () => {
        let active = null;
        document.querySelectorAll('.code-block').forEach(block => {
            const rect = block.getBoundingClientRect();
            if (rect.top <= 200 && rect.bottom >= 200) active = block;
        });
        document.querySelectorAll('.code-block, .explain-block').forEach(el => el.classList.remove('active'));
        if (active) {
            active.classList.add('active');
            document.querySelector(`.explain-block[data-id="${active.dataset.id}"]`).classList.add('active');
        }
    });

    document.getElementById('saveButton').addEventListener('click', function() {
        const htmlContent = document.documentElement.outerHTML;
        const blob = new Blob([htmlContent], { type: 'text/html' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        const currentPath = window.location.pathname;
        const originalFileName = currentPath.split(/[\\/]/).pop();
        const fileName = originalFileName
                             ? (originalFileName.endsWith('.html') ? originalFileName : `${originalFileName}.html`)
                             : 'code_notes.html';
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(a.href);

        this.textContent = 'save success';
        setTimeout(() => this.textContent = 'save context', 1500);
    });
    </script>
        </body>
        </html>